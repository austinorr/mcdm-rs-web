import{s as N}from"./workerHelpers-C-cwSv1-.js";let r;function l(e){const t=r.__externref_table_alloc();return r.__wbindgen_export_2.set(t,e),t}function q(e,t){try{return e.apply(this,t)}catch(n){const o=l(n);r.__wbindgen_exn_store(o)}}const F=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&F.decode();let w=null;function m(){return(w===null||w.buffer!==r.memory.buffer)&&(w=new Uint8Array(r.memory.buffer)),w}function p(e,t){return e=e>>>0,F.decode(m().slice(e,e+t))}let _=0;const E=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},G=function(e,t){const n=E.encode(e);return t.set(n),{read:e.length,written:n.length}};function T(e,t,n){if(n===void 0){const c=E.encode(e),f=t(c.length,1)>>>0;return m().subarray(f,f+c.length).set(c),_=c.length,f}let o=e.length,i=t(o,1)>>>0;const a=m();let s=0;for(;s<o;s++){const c=e.charCodeAt(s);if(c>127)break;a[i+s]=c}if(s!==o){s!==0&&(e=e.slice(s)),i=n(i,o,o=s+e.length*3,1)>>>0;const c=m().subarray(i+s,i+o),f=G(e,c);s+=f.written,i=n(i,o,s,1)>>>0}return _=s,i}let g=null;function d(){return(g===null||g.buffer!==r.memory.buffer)&&(g=new DataView(r.memory.buffer)),g}function b(e){return e==null}function Z(){r.init_panic_hook()}let y=null;function j(){return(y===null||y.buffer!==r.memory.buffer)&&(y=new Float32Array(r.memory.buffer)),y}function u(e,t){const n=t(e.length*4,4)>>>0;return j().set(e,n/4),_=e.length,n}function H(e,t){const n=t(e.length*4,4)>>>0;for(let o=0;o<e.length;o++){const i=l(e[o]);d().setUint32(n+4*o,i,!0)}return _=e.length,n}function X(e){const t=r.__wbindgen_export_2.get(e);return r.__externref_table_dealloc(e),t}function K(e,t){return e=e>>>0,j().subarray(e/4,e/4+t)}function $(e){return r.initThreadPool(e)}function ee(e){r.wbg_rayon_start_worker(e)}const W=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_promjs_free(e>>>0,1));class te{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,W.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_promjs_free(t,0)}constructor(t,n,o,i,a,s,c,f){const R=u(t,r.__wbindgen_malloc),k=_,L=u(i,r.__wbindgen_malloc),D=_,I=u(a,r.__wbindgen_malloc),U=_,z=H(s,r.__wbindgen_malloc),P=_,B=u(c,r.__wbindgen_malloc),V=_,C=u(f,r.__wbindgen_malloc),J=_,h=r.promjs_new(R,k,n,o,L,D,I,U,z,P,B,V,C,J);if(h[2])throw X(h[1]);return this.__wbg_ptr=h[0]>>>0,W.register(this,this.__wbg_ptr,this),this}compute_prom_ii(){r.promjs_compute_prom_ii(this.__wbg_ptr)}get_score(){const t=r.promjs_get_score(this.__wbg_ptr);var n=K(t[0],t[1]).slice();return r.__wbindgen_free(t[0],t[1]*4,4),n}re_weight(t){const n=u(t,r.__wbindgen_malloc),o=_;r.promjs_re_weight(this.__wbg_ptr,n,o)}}const x=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_wbg_rayon_poolbuilder_free(e>>>0,1));class A{static __wrap(t){t=t>>>0;const n=Object.create(A.prototype);return n.__wbg_ptr=t,x.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,x.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_wbg_rayon_poolbuilder_free(t,0)}numThreads(){return r.wbg_rayon_poolbuilder_numThreads(this.__wbg_ptr)>>>0}receiver(){return r.wbg_rayon_poolbuilder_receiver(this.__wbg_ptr)>>>0}build(){r.wbg_rayon_poolbuilder_build(this.__wbg_ptr)}}async function Q(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function O(){const e={};return e.wbg={},e.wbg.__wbg_call_672a4d21634d4a24=function(){return q(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let o,i;try{o=t,i=n,console.error(p(t,n))}finally{r.__wbindgen_free(o,i,1)}},e.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(t){let n;try{n=t instanceof Window}catch{n=!1}return n},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,n){return new Function(p(t,n))},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const o=n.stack,i=T(o,r.__wbindgen_malloc,r.__wbindgen_realloc),a=_;d().setInt32(t+4*1,a,!0),d().setInt32(t+4*0,i,!0)},e.wbg.__wbg_startWorkers_2ca11761e08ff5d5=function(t,n,o){return N(t,n,A.__wrap(o))},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t=typeof global>"u"?null:global;return b(t)?0:l(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t=typeof globalThis>"u"?null:globalThis;return b(t)?0:l(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t=typeof self>"u"?null:self;return b(t)?0:l(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t=typeof window>"u"?null:window;return b(t)?0:l(t)},e.wbg.__wbindgen_error_new=function(t,n){return new Error(p(t,n))},e.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_is_undefined=function(t){return t===void 0},e.wbg.__wbindgen_memory=function(){return r.memory},e.wbg.__wbindgen_module=function(){return M.__wbindgen_wasm_module},e.wbg.__wbindgen_string_get=function(t,n){const o=n,i=typeof o=="string"?o:void 0;var a=b(i)?0:T(i,r.__wbindgen_malloc,r.__wbindgen_realloc),s=_;d().setInt32(t+4*1,s,!0),d().setInt32(t+4*0,a,!0)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(p(t,n))},e}function S(e,t){e.wbg.memory=t||new WebAssembly.Memory({initial:18,maximum:16384,shared:!0})}function v(e,t,n){if(r=e.exports,M.__wbindgen_wasm_module=t,g=null,y=null,w=null,typeof n<"u"&&(typeof n!="number"||n===0||n%65536!==0))throw"invalid stack size";return r.__wbindgen_start(n),r}function ne(e,t){if(r!==void 0)return r;let n;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const o=O();S(o,t),e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const i=new WebAssembly.Instance(e,o);return v(i,e,n)}async function M(e,t){if(r!==void 0)return r;let n;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL(""+new URL("mcdmrs_wasm_bg-CsSX1rO8.wasm",import.meta.url).href,import.meta.url));const o=O();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e)),S(o,t);const{instance:i,module:a}=await Q(await e,o);return v(i,a,n)}export{te as PromJS,M as default,ne as initSync,$ as initThreadPool,Z as init_panic_hook,A as wbg_rayon_PoolBuilder,ee as wbg_rayon_start_worker};
