import{s as Y}from"./workerHelpers-RLheL40Q.js";let r;const b=new Array(128).fill(void 0);b.push(void 0,null,!0,!1);function w(e){return b[e]}let h=b.length;function s(e){h===b.length&&b.push(b.length+1);const t=h;return h=b[t],b[t]=e,t}function Z(e,t){try{return e.apply(this,t)}catch(n){r.__wbindgen_export_0(s(n))}}const k=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&k.decode();let p=null;function T(){return(p===null||p.buffer!==r.memory.buffer)&&(p=new Uint8Array(r.memory.buffer)),p}function W(e,t){return e=e>>>0,k.decode(T().slice(e,e+t))}let c=0;const E=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},$=function(e,t){const n=E.encode(e);return t.set(n),{read:e.length,written:n.length}};function v(e,t,n){if(n===void 0){const a=E.encode(e),g=t(a.length,1)>>>0;return T().subarray(g,g+a.length).set(a),c=a.length,g}let i=e.length,o=t(i,1)>>>0;const u=T();let _=0;for(;_<i;_++){const a=e.charCodeAt(_);if(a>127)break;u[o+_]=a}if(_!==i){_!==0&&(e=e.slice(_)),o=n(o,i,i=_+e.length*3,1)>>>0;const a=T().subarray(o+_,o+i),g=$(e,a);_+=g.written,o=n(o,i,_,1)>>>0}return c=_,o}let y=null;function f(){return(y===null||y.buffer!==r.memory.buffer)&&(y=new DataView(r.memory.buffer)),y}function ee(e){e<132||(b[e]=h,h=e)}function x(e){const t=w(e);return ee(e),t}function d(e){return e==null}function oe(){r.init_panic_hook()}let m=null;function I(){return(m===null||m.buffer!==r.memory.buffer)&&(m=new Float32Array(r.memory.buffer)),m}function l(e,t){const n=t(e.length*4,4)>>>0;return I().set(e,n/4),c=e.length,n}function te(e,t){const n=t(e.length*4,4)>>>0,i=f();for(let o=0;o<e.length;o++)i.setUint32(n+4*o,s(e[o]),!0);return c=e.length,n}function ne(e,t){return e=e>>>0,I().subarray(e/4,e/4+t)}function _e(e){const t=r.initThreadPool(e);return x(t)}function se(e){r.wbg_rayon_start_worker(e)}const F=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_promjs_free(e>>>0,1));class ce{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,F.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_promjs_free(t,0)}constructor(t,n,i,o,u,_,a,g){try{const A=r.__wbindgen_add_to_stack_pointer(-16),P=l(t,r.__wbindgen_export_3),B=c,V=l(o,r.__wbindgen_export_3),N=c,C=l(u,r.__wbindgen_export_3),H=c,J=te(_,r.__wbindgen_export_3),q=c,G=l(a,r.__wbindgen_export_3),X=c,K=l(g,r.__wbindgen_export_3),Q=c;r.promjs_new(A,P,B,n,i,V,N,C,H,J,q,G,X,K,Q);var D=f().getInt32(A+4*0,!0),U=f().getInt32(A+4*1,!0),z=f().getInt32(A+4*2,!0);if(z)throw x(U);return this.__wbg_ptr=D>>>0,F.register(this,this.__wbg_ptr,this),this}finally{r.__wbindgen_add_to_stack_pointer(16)}}compute_prom_ii(){r.promjs_compute_prom_ii(this.__wbg_ptr)}get_score(){try{const o=r.__wbindgen_add_to_stack_pointer(-16);r.promjs_get_score(o,this.__wbg_ptr);var t=f().getInt32(o+4*0,!0),n=f().getInt32(o+4*1,!0),i=ne(t,n).slice();return r.__wbindgen_export_1(t,n*4,4),i}finally{r.__wbindgen_add_to_stack_pointer(16)}}re_weight(t){const n=l(t,r.__wbindgen_export_3),i=c;r.promjs_re_weight(this.__wbg_ptr,n,i)}}const O=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_wbg_rayon_poolbuilder_free(e>>>0,1));class j{static __wrap(t){t=t>>>0;const n=Object.create(j.prototype);return n.__wbg_ptr=t,O.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,O.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_wbg_rayon_poolbuilder_free(t,0)}numThreads(){return r.wbg_rayon_poolbuilder_numThreads(this.__wbg_ptr)>>>0}receiver(){return r.wbg_rayon_poolbuilder_receiver(this.__wbg_ptr)>>>0}build(){r.wbg_rayon_poolbuilder_build(this.__wbg_ptr)}}async function re(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(i){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function M(){const e={};return e.wbg={},e.wbg.__wbg_call_672a4d21634d4a24=function(){return Z(function(t,n){const i=w(t).call(w(n));return s(i)},arguments)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let i,o;try{i=t,o=n,console.error(W(t,n))}finally{r.__wbindgen_export_1(i,o,1)}},e.wbg.__wbg_instanceof_Window_def73ea0955fc569=function(t){let n;try{n=w(t)instanceof Window}catch{n=!1}return n},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){const t=new Error;return s(t)},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,n){const i=new Function(W(t,n));return s(i)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const i=w(n).stack,o=v(i,r.__wbindgen_export_3,r.__wbindgen_export_4),u=c;f().setInt32(t+4*1,u,!0),f().setInt32(t+4*0,o,!0)},e.wbg.__wbg_startWorkers_2ca11761e08ff5d5=function(t,n,i){const o=Y(x(t),x(n),j.__wrap(i));return s(o)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t=typeof global>"u"?null:global;return d(t)?0:s(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t=typeof globalThis>"u"?null:globalThis;return d(t)?0:s(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t=typeof self>"u"?null:self;return d(t)?0:s(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t=typeof window>"u"?null:window;return d(t)?0:s(t)},e.wbg.__wbindgen_error_new=function(t,n){const i=new Error(W(t,n));return s(i)},e.wbg.__wbindgen_is_undefined=function(t){return w(t)===void 0},e.wbg.__wbindgen_memory=function(){const t=r.memory;return s(t)},e.wbg.__wbindgen_module=function(){const t=L.__wbindgen_wasm_module;return s(t)},e.wbg.__wbindgen_object_clone_ref=function(t){const n=w(t);return s(n)},e.wbg.__wbindgen_object_drop_ref=function(t){x(t)},e.wbg.__wbindgen_string_get=function(t,n){const i=w(n),o=typeof i=="string"?i:void 0;var u=d(o)?0:v(o,r.__wbindgen_export_3,r.__wbindgen_export_4),_=c;f().setInt32(t+4*1,_,!0),f().setInt32(t+4*0,u,!0)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(W(t,n))},e}function R(e,t){e.wbg.memory=t||new WebAssembly.Memory({initial:18,maximum:16384,shared:!0})}function S(e,t,n){if(r=e.exports,L.__wbindgen_wasm_module=t,y=null,m=null,p=null,typeof n<"u"&&(typeof n!="number"||n===0||n%65536!==0))throw"invalid stack size";return r.__wbindgen_start(n),r}function ae(e,t){if(r!==void 0)return r;let n;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const i=M();R(i,t),e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const o=new WebAssembly.Instance(e,i);return S(o,e,n)}async function L(e,t){if(r!==void 0)return r;let n;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e,memory:t,thread_stack_size:n}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL(""+new URL("mcdmrs_wasm_bg-RTMHNvhX.wasm",import.meta.url).href,import.meta.url));const i=M();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e)),R(i,t);const{instance:o,module:u}=await re(await e,i);return S(o,u,n)}export{ce as PromJS,L as default,ae as initSync,_e as initThreadPool,oe as init_panic_hook,j as wbg_rayon_PoolBuilder,se as wbg_rayon_start_worker};
